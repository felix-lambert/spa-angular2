/////////////////////////////////////////////////////////////////
// MODULE DEPENDENCIES //////////////////////////////////////////
/////////////////////////////////////////////////////////////////
var express = require('express');
var app = express();
var port = process.env.PORT || 8080;
var mongoose = require('mongoose');


console.log('check database')
require('./server/models/db');
console.log('end check database');
// /////////////////////////////////////////////////////////////////
// // CONFIG DATA MODELS ///////////////////////////////////////////
// /////////////////////////////////////////////////////////////////
console.log('check the models...');
require('./server/models/bookmark');
console.log('done');
/////////////////////////////////////////////////////////////////
// CONFIGURE APPLICATION ////////////////////////////////////////
/////////////////////////////////////////////////////////////////
console.log('config');
require('./server/config')(app, express);
console.log('done');

/////////////////////////////////////////////////////////////////
// ROUTES ///////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////
console.log('check routes...');
require('./server/routes/routes.js')(app);
console.log('done');

app.all('/*', function(req, res) {
    res.sendFile('index.html', { root: __dirname + '/client/public/' });
});

//Start Server
app.listen(port);
console.log('Listening on port ' + port);